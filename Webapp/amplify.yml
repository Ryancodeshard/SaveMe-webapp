version: 2
applications:
  backend:
    phases:
      build:
        commands:
            - chmod u+x ./myamplifyPush.sh
            - ./myamplifyPush.sh
  frontend:
    phases:
      preBuild:
        commands:
          - npm install
      build:
        commands:
          - npm run build
          - node ./node_modules/gulp/bin/gulp.js
    artifacts:
      baseDirectory: build
      files:
        - '**/*'
    cache:
      paths:
        - node_modules/**/*
  appRoot: Webapp
